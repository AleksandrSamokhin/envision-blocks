!function(o){var e=o(window),n=o(document);function i(){o(".envision-blocks-filter").on("click",(function(e){var n=o(this);if(!n.is(".clicked")){n.siblings().removeClass("active"),n.addClass("clicked active"),e.preventDefault(),e.stopPropagation();var i=n.data("filter"),s=n.parent(".envision-blocks-isotope-filter").siblings(".envision-blocks-load-more-container"),t=s.find(".envision-blocks-row"),a=t.find(".envision-blocks-grid-sizer"),r=s.data("settings"),c=n.parent(".envision-blocks-isotope-filter").siblings(".envision-blocks-load-more"),l={action:"envision_blocks_widget_post_filter",security:envision_blocks_elementor_data.ajax_nonce,data:{category:i,settings:r}};o.ajax({type:"POST",url:envision_blocks_elementor_data.ajax_url,data:l,beforeSend:function(o){t.addClass("envision-blocks-loading"),c.hide(),t.append('<div class="envision-blocks-loader"></div>')},success:function(e){var i;e?(n.removeClass("clicked"),t.removeClass("envision-blocks-loading"),t.find(".envision-blocks-loader").remove(),t.find(".envision-blocks-masonry-item").remove(),"*"===n.data("filter")&&c.show(),i=o(e).hide(),a.after(i),t.imagesLoaded((function(){i.show(),t.data("isotope")&&t.isotope("layout").isotope("appended",i)}))):n.parent(".envision-blocks-load-more").remove()}})}return!1}))}window.envisionBlocks={},envisionBlocks.windowWidth=e.width(),e.resize((function(){envisionBlocks.windowWidth=e.width()})),envisionBlocks.isInViewport={check:function(o,e,n){if(o.length){var i=void 0!==o.data("viewport-offset")?o.data("viewport-offset"):.15,s=new IntersectionObserver((function(i){!0===i[0].isIntersecting&&(e.call(o),!1!==n&&s.disconnect())}),{threshold:[i]});s.observe(o[0])}}},envisionBlocks.debounce=function(o,e){var n;return e=e||100,function(i){n&&clearTimeout(n),n=setTimeout(o,e,i)}};var s=function(o,e){var n=o.find(".envision-blocks-load-more-container").data("settings").post_type;"post"===n&&(n="posts");var i=e(".envision-blocks-masonry-grid__"+n);i.length>0&&function(o,e,n){var i=o;e.data("id"),i.imagesLoaded((function(){i.isotope({itemSelector:".envision-blocks-masonry-item",masonry:{columnWidth:".envision-blocks-grid-sizer"},percentPosition:!0,stagger:30,hiddenStyle:{transform:"translateY(100px)",opacity:0},visibleStyle:{transform:"translateY(0px)",opacity:1}}),i.isotope()})),elementorFrontend.isEditMode()&&elementor.channels.editor.on("change",(function(o){var e=o.container.settings.changed;(e.grid_style_rows_gap||e.box_height)&&i.isotope("layout")}))}(i,o)},t=function(o,e){var n=e(".envision-blocks-woocommerce-template .elementor");n.hasClass("product")||n.addClass("product")};n.ready((function(){o(".envision-blocks-load-more__button").on("click",(function(e){var n=o(this);if(!n.is(".clicked")){n.addClass("clicked"),e.preventDefault(),e.stopPropagation();var i=n.parent(".envision-blocks-load-more").siblings(".envision-blocks-load-more-container"),s=i.find(".envision-blocks-row"),t=i.data("page"),a=t+1,r=i.data("settings"),c={action:"envision_blocks_widget_load_more",security:envision_blocks_elementor_data.ajax_nonce,data:{page:t,settings:r}};o.ajax({type:"POST",url:envision_blocks_elementor_data.ajax_url,data:c,beforeSend:function(o){n.addClass("envision-blocks-loading"),n.append('<div class="envision-blocks-loader"></div>')},success:function(e){if(e){n.removeClass("envision-blocks-loading clicked"),n.find(".envision-blocks-loader").remove(),i.data("page",a);var t=o(e).hide();s.append(t),s.imagesLoaded((function(){t.show(),s.data("isotope")&&s.isotope("appended",t)})),i.data("page_max")==i.data("page")&&n.parent(".envision-blocks-load-more").remove()}else n.parent(".envision-blocks-load-more").remove()}})}return!1})),i()})),e.on("scroll",(function(){var n;(n=o(".envision-blocks-header--is-sticky")).css({top:"-"+n.height()+"px"}),e.scrollTop()>190?(n.addClass("envision-blocks-header--is-scrolling"),n.css({top:""})):n.removeClass("envision-blocks-header--is-scrolling")})),e.on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/envision-blocks-portfolio.default",s),elementorFrontend.hooks.addAction("frontend/element_ready/envision-blocks-posts.default",s);for(var o=["envision-blocks-woo-product-breadcrumbs","envision-blocks-woo-product-add-to-cart","envision-blocks-woo-product-additional-information","envision-blocks-woo-product-image","envision-blocks-woo-product-meta","envision-blocks-woo-product-price","envision-blocks-woo-product-rating","envision-blocks-woo-product-related","envision-blocks-woo-product-short-description","envision-blocks-woo-product-stock","envision-blocks-woo-product-tabs","envision-blocks-woo-product-title","envision-blocks-woo-product-upsell","envision-blocks-woo-product-notices"],e=0;e<o.length;e++)elementorFrontend.hooks.addAction("frontend/element_ready/"+o[e]+".default",t)}))}(jQuery);
(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,o(i.key),i)}}function o(e){var o=function(e,o){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,o||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==t(o)?o:String(o)}function n(e,o,n){return o=s(o),function(e,o){if(o&&("object"===t(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,i()?Reflect.construct(o,n||[],s(e).constructor):o.apply(e,n))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(i=function(){return!!t})()}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,o){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:o):i.value}},r.apply(this,arguments)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}var c=function(t){function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),n(this,o,arguments)}var i,c,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(o,elementorModules.frontend.handlers.Base),i=o,c=[{key:"getDefaultSettings",value:function(){return{selectors:{hotspot:".envision-blocks-hotspot",tooltip:".envision-blocks-hotspot__tooltip"}}}},{key:"getDefaultElements",value:function(){var t=this.getSettings("selectors");return{$hotspot:this.$element.find(t.hotspot),$hotspotsExcludesLinks:this.$element.find(t.hotspot).filter(":not(.envision-blocks-hotspot--no-tooltip)"),$tooltip:this.$element.find(t.tooltip)}}},{key:"bindEvents",value:function(){var t=this,e=this.getCurrentDeviceSetting("tooltip_trigger"),o="mouseenter"===e?"mouseleave mouseenter":e;"none"!==o&&this.elements.$hotspotsExcludesLinks.on(o,(function(e){return t.onHotspotTriggerEvent(e)}))}},{key:"onDeviceModeChange",value:function(){this.elements.$hotspotsExcludesLinks.off(),this.bindEvents()}},{key:"onHotspotTriggerEvent",value:function(t){var e=jQuery(t.target),o=e.closest(".envision-blocks-hotspot__button").length,n="mouseleave"===t.type&&(e.is(".envision-blocks-hotspot--tooltip-position")||e.parents(".envision-blocks-hotspot--tooltip-position").length),i="mobile"===elementorFrontend.getCurrentDeviceMode();if((!e.closest(".envision-blocks-hotspot--link").length||!i||"mouseleave"!==t.type&&"mouseenter"!==t.type)&&(o||n)){var r=jQuery(t.currentTarget);this.elements.$hotspot.not(r).removeClass("envision-blocks-hotspot--active"),r.toggleClass("envision-blocks-hotspot--active")}}},{key:"editorAddSequencedAnimation",value:function(){this.elements.$hotspot.toggleClass("envision-blocks-hotspot--sequenced","yes"===this.getElementSettings("hotspot_sequenced_animation"))}},{key:"hotspotSequencedAnimation",value:function(){var t=this,e=this.getElementSettings();if("no"!==e.hotspot_sequenced_animation){var o=elementorModules.utils.Scroll.scrollObserver({callback:function(n){n.isInViewport&&(o.unobserve(t.$element[0]),t.elements.$hotspot.each((function(o,n){if(0!==o){var i=e.hotspot_sequenced_animation_duration,r=o*((i?i.size:1e3)/t.elements.$hotspot.length);n.style.animationDelay=r+"ms"}})))}});o.observe(this.$element[0])}}},{key:"setTooltipPositionControl",value:function(){var t=this.getElementSettings();void 0!==t.tooltip_animation&&t.tooltip_animation.match(/^envision-blocks-hotspot--(slide|fade)-direction/)&&(this.elements.$tooltip.removeClass("envision-blocks-hotspot--tooltip-animation-from-left envision-blocks-hotspot--tooltip-animation-from-top envision-blocks-hotspot--tooltip-animation-from-right envision-blocks-hotspot--tooltip-animation-from-bottom"),this.elements.$tooltip.addClass("envision-blocks-hotspot--tooltip-animation-from-"+t.tooltip_position))}},{key:"onInit",value:function(){for(var t,e=this,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];(t=r(s(o.prototype),"onInit",this)).call.apply(t,[this].concat(i)),this.hotspotSequencedAnimation(),this.setTooltipPositionControl(),window.elementor&&elementor.listenTo(elementor.channels.deviceMode,"change",(function(){return e.onDeviceModeChange()}))}},{key:"onElementChange",value:function(t){t.startsWith("tooltip_position")&&this.setTooltipPositionControl(),t.startsWith("hotspot_sequenced_animation")&&this.editorAddSequencedAnimation()}}],c&&e(i.prototype,c),u&&e(i,u),Object.defineProperty(i,"prototype",{writable:!1}),o}();jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/envision-blocks-hotspot.default",(function(t){elementorFrontend.elementsHandler.addHandler(c,{$element:t})}))}))})();